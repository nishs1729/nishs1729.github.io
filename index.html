<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    *{
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
    }
    html, body{
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: #333;
        overflow: hidden;
    }
    canvas{
        background-color: #000;
    }

    .under-construction-box {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px 30px;
      background-color: rgba(0, 0, 0, 0.7); /* Darker background for the box */
      border-radius: 8px;
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.5), 0 0 10px rgba(0, 255, 255, 0.8) inset; /* Glowing shadow */
      text-align: center;
      z-index: 10; /* Ensure it's above the canvas */
    }

    .construction-message {
      font-family: sans-serif; /* Use a generic sans-serif font */
      font-size: 1.5rem;
      color: #00ffff; /* Cyan accent for the message */
      margin: 0;
    }
    .faded-message {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-family: sans-serif;
      font-size: 0.8rem;
      color: #ffffff; /* White color */
      opacity: 0.3; /* Faded effect */
      z-index: 10;
    }
  </style>
</head>

<body>
  <canvas id="nokey" width="800" height="800">
      Your Browser Don't Support Canvas, Please Download Chrome ^_^``
  </canvas>

  <div class="under-construction-box">
    <p class="construction-message">Warning: Genius at work. Please stand by for awesomeness.</p>
  </div>

  <script>
    var canvas = document.getElementById('nokey'),
      can_w = parseInt(canvas.getAttribute('width')),
      can_h = parseInt(canvas.getAttribute('height')),
      ctx = canvas.getContext('2d');

    // console.log(typeof can_w);
        var BALL_NUM;

    const cheekyMessages = [
      "Warning: Genius at work. Please stand by for awesomeness.",
      "Our pixels are still brewing. Come back when we're fully caffeinated!",
      "We're not lazy, we're just in beta. (A very, very long beta.)",
      "Under construction, but our memes are fully functional.",
      "Hold your horses! We're building something legendary.",
      "We're busy making magic happen. Check back when the glitter settles!",
      "Patience, young padawan. Greatness is being forged.",
      "Our website is currently in its cocoon phase. Soon, a beautiful butterfly!",
      "Under construction: Because perfection takes time (and a lot of coffee).",
      "We're upgrading our awesomeness. Prepare to be amazed!",
      "This page is currently on a coffee break. Be back soon, probably with more features.",
      "Our digital architects are still drawing up plans for world domination. Stay tuned!",
      "We're not broken, we're just evolving. Rapidly.",
      "Our website is currently in stealth mode. Top secret stuff happening!",
      "We're not just building a website, we're crafting a masterpiece. Stay tuned!",
      "This page is taking a power nap. Wake it up with your enthusiasm soon!",
      "Under construction: Our digital elves are working tirelessly.",
      "We're still polishing the pixels. Almost ready for your viewing pleasure!",
      "Our website is currently in a deep thought. Don't disturb its creative process!",
      "We're not just building a website, we're crafting an experience. Almost there!",
      "This page is currently on a quest for epicness. It will return victorious!",
      "Under construction: Our digital garden is blooming. Soon, a visual feast!",
      "We're fine-tuning the awesomeness. Prepare for maximum impact!",
      "Our data is still compiling. Please wait for the statistically significant results!",
      "Under peer review. Expect groundbreaking insights soon!",
      "We're currently in the experimental phase. Results may vary (but will be awesome).",
      "Hypothesis: This website will be amazing. Experiment in progress.",
      "Running simulations for optimal user experience. Stand by for convergence!",
      "Our algorithms are optimizing for maximum cheekiness. Calculation in progress.",
      "This site is undergoing a rigorous quality control process. No p-hacking here!",
      "We're synthesizing new content. Expect a catalytic reaction of awesomeness!",
      "Warning: Our code is evolving. Expect some natural selection.",
      "Under construction: We're still synthesizing the perfect user experience.",
      "This site is undergoing mitosis. Soon there will be two of everything!",
      "Our developers are working at a cellular level to bring you this site.",
      "We're cultivating greatness. Please allow for optimal growth conditions.",
      "This page is currently in its larval stage. A beautiful butterfly is emerging!",
      "Our website is like a complex organism, constantly adapting and improving.",
      "We're genetically engineering the best possible user interface.",
      "Patience, we're still in the primordial soup of development.",
      "This site is a work in progress, much like life itself."
    ];

    // Function to get a random message
    function getRandomCheekyMessage() {
      const randomIndex = Math.floor(Math.random() * cheekyMessages.length);
      return cheekyMessages[randomIndex];
    }

    var ball = {
          x: 0,
          y: 0,
          vx: 0,
          vy: 0,
          r: 0,
          alpha: 1,
          phase: 0
      },
      ball_color = {
          r: 207,
          g: 255,
          b: 4
      },
      R = 3,
      balls = [],
      alpha_f = 0.03,
      alpha_phase = 0,
        
    // Line
      link_line_width = 1.2,
      dis_limit = 260,
      add_mouse_point = true,
      mouse_in = false,
      mouse_ball = {
          x: 0,
          y: 0,
          vx: 0,
          vy: 0,
          r: 0,
          type: 'mouse'
      };

    // Random speed
    function getRandomSpeed(pos){
        var  min = -1,
          max = 1;
        switch(pos){
            case 'top':
                return [randomNumFrom(min, max), randomNumFrom(0.1, max)];
                break;
            case 'right':
                return [randomNumFrom(min, -0.1), randomNumFrom(min, max)];
                break;
            case 'bottom':
                return [randomNumFrom(min, max), randomNumFrom(min, -0.1)];
                break;
            case 'left':
                return [randomNumFrom(0.1, max), randomNumFrom(min, max)];
                break;
            default:
                return;
                break;
        }
    }
    function randomArrayItem(arr){
        return arr[Math.floor(Math.random() * arr.length)];
    }
    function randomNumFrom(min, max){
        return Math.random()*(max - min) + min;
    }
    console.log(randomNumFrom(0, 10));
    // Random Ball
    function getRandomBall(){
        var pos = randomArrayItem(['top', 'right', 'bottom', 'left']);
        switch(pos){
            case 'top':
                return {
                    x: randomSidePos(can_w),
                    y: -R,
                    vx: getRandomSpeed('top')[0],
                    vy: getRandomSpeed('top')[1],
                    r: R,
                    alpha: 1,
                    phase: randomNumFrom(0, 10)
                }
                break;
            case 'right':
                return {
                    x: can_w + R,
                    y: randomSidePos(can_h),
                    vx: getRandomSpeed('right')[0],
                    vy: getRandomSpeed('right')[1],
                    r: R,
                    alpha: 1,
                    phase: randomNumFrom(0, 10)
                }
                break;
            case 'bottom':
                return {
                    x: randomSidePos(can_w),
                    y: can_h + R,
                    vx: getRandomSpeed('bottom')[0],
                    vy: getRandomSpeed('bottom')[1],
                    r: R,
                    alpha: 1,
                    phase: randomNumFrom(0, 10)
                }
                break;
            case 'left':
                return {
                    x: -R,
                    y: randomSidePos(can_h),
                    vx: getRandomSpeed('left')[0],
                    vy: getRandomSpeed('left')[1],
                    r: R,
                    alpha: 1,
                    phase: randomNumFrom(0, 10)
                }
                break;
        }
    }
    function randomSidePos(length){
        return Math.ceil(Math.random() * length);
    }

    // Draw Ball
    function renderBalls(){
        Array.prototype.forEach.call(balls, function(b){
          if(!b.hasOwnProperty('type')){
              ctx.fillStyle = 'rgba('+ball_color.r+','+ball_color.g+','+ball_color.b+','+b.alpha+')';
              ctx.beginPath();
              ctx.arc(b.x, b.y, R, 0, Math.PI*2, true);
              ctx.closePath();
              ctx.fill();
          }
        });
    }

    // Update balls
    function updateBalls(){
        var new_balls = [];
        Array.prototype.forEach.call(balls, function(b){
            b.x += b.vx;
            b.y += b.vy;
            
            if(b.x > -(50) && b.x < (can_w+50) && b.y > -(50) && b.y < (can_h+50)){
              new_balls.push(b);
            }
            
            // alpha change
            b.phase += alpha_f;
            b.alpha = Math.abs(Math.cos(b.phase));
            // console.log(b.alpha);
        });
        
        balls = new_balls.slice(0);
    }

    // loop alpha
    function loopAlphaInf(){
        
    }

    // Draw lines
    function renderLines(){
        var fraction, alpha;
        for (var i = 0; i < balls.length; i++) {
            for (var j = i + 1; j < balls.length; j++) {
              
              fraction = getDisOf(balls[i], balls[j]) / dis_limit;
                
              if(fraction < 1){
                  alpha = (1 - fraction).toString();

                  ctx.strokeStyle = 'rgba(150,150,150,'+alpha+')';
                  ctx.lineWidth = link_line_width;
                  
                  ctx.beginPath();
                  ctx.moveTo(balls[i].x, balls[i].y);
                  ctx.lineTo(balls[j].x, balls[j].y);
                  ctx.stroke();
                  ctx.closePath();
              }
            }
        }
    }

    // calculate distance between two points
    function getDisOf(b1, b2){
        var  delta_x = Math.abs(b1.x - b2.x),
          delta_y = Math.abs(b1.y - b2.y);
        
        return Math.sqrt(delta_x*delta_x + delta_y*delta_y);
    }

    // add balls if there a little balls
    function addBallIfy(){
        if(balls.length < BALL_NUM){
            balls.push(getRandomBall());
        }
    }

    // Render
    function render(){
        ctx.clearRect(0, 0, can_w, can_h);
        
        renderBalls();
        
        renderLines();
        
        updateBalls();
        
        addBallIfy();
        
        window.requestAnimationFrame(render);
    }

    // Init Balls
    function initBalls(num){
        for(var i = 1; i <= num; i++){
            balls.push({
                x: randomSidePos(can_w),
                y: randomSidePos(can_h),
                vx: getRandomSpeed('top')[0],
                vy: getRandomSpeed('top')[1],
                r: R,
                alpha: 1,
                phase: randomNumFrom(0, 10)
            });
        }
    }
    // Init Canvas
    function initCanvas(){
        canvas.setAttribute('width', window.innerWidth);
        canvas.setAttribute('height', window.innerHeight);
        
        can_w = parseInt(canvas.getAttribute('width'));
        can_h = parseInt(canvas.getAttribute('height'));

        BALL_NUM = Math.floor((can_w * can_h) / 20000); // Adjust this constant as needed
        if (BALL_NUM < 10) BALL_NUM = 10; // Ensure a minimum number of balls
        
        // Re-initialize balls when canvas size changes
        balls = []; // Clear existing balls
        initBalls(BALL_NUM);
    }
    window.addEventListener('resize', function(e){
        console.log('Window Resize...');
        initCanvas();
    });

    function goMovie(){
        initCanvas();
        window.requestAnimationFrame(render);
    }
    goMovie();

    // Set a random cheeky message on load
    document.addEventListener('DOMContentLoaded', function() {
      const messageElement = document.querySelector('.construction-message');
      if (messageElement) {
        messageElement.textContent = getRandomCheekyMessage();
      }
    });

    // Mouse effect
    canvas.addEventListener('mouseenter', function(){
        console.log('mouseenter');
        mouse_in = true;
        balls.push(mouse_ball);
    });
    canvas.addEventListener('mouseleave', function(){
        console.log('mouseleave');
        mouse_in = false;
        var new_balls = [];
        Array.prototype.forEach.call(balls, function(b){
            if(!b.hasOwnProperty('type')){
                new_balls.push(b);
            }
        });
        balls = new_balls.slice(0);
    });
    canvas.addEventListener('mousemove', function(e){
        var e = e || window.event;
        mouse_ball.x = e.pageX;
        mouse_ball.y = e.pageY;
        // console.log(mouse_ball);
    });
</script>

  <div class="faded-message">
    <p>Site under construction</p>
  </div>
</body>
</script>